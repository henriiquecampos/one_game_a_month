[gd_scene load_steps=5 format=2]

[ext_resource path="res://levels/tilesets/tileset.tres" type="TileSet" id=1]
[ext_resource path="res://levels/tilesets/blue_land.png" type="Texture" id=2]
[ext_resource path="res://actors/fighting_pig/pig.tscn" type="PackedScene" id=3]

[sub_resource type="GDScript" id=1]

script/source = "extends Position2D

export (String, FILE, \"*.tscn\") var spawn
export (int, -1, 1, 1) var horizontal = 0
export (int, -1, 1, 1) var vertical = 0
func _ready():
	$timer.connect(\"timeout\", self, \"spawn\")

func spawn():
	var s = load(spawn).instance()
	s.get_node(\"hurt_box\").set_hurt_vector(Vector2(horizontal, vertical))
	s.speed *= horizontal
	s.set_global_position(get_global_position())
	get_parent().add_child(s)
	$timer.start()"

[node name="level_01" type="Node2D" index="0"]

[node name="spawner" type="Position2D" parent="." index="0"]

position = Vector2( 2, 392 )
script = SubResource( 1 )
_sections_unfolded = [ "Transform" ]
spawn = "res://objects/cookie/cookie.tscn"
horizontal = 1
vertical = 0

[node name="timer" type="Timer" parent="spawner" index="0"]

process_mode = 1
wait_time = 4.0
one_shot = true
autostart = true

[node name="spawner2" type="Position2D" parent="." index="1"]

position = Vector2( 1024, 392 )
script = SubResource( 1 )
_sections_unfolded = [ "Transform" ]
spawn = "res://objects/cookie/cookie.tscn"
horizontal = -1
vertical = 0

[node name="timer" type="Timer" parent="spawner2" index="0"]

process_mode = 1
wait_time = 6.0
one_shot = true
autostart = true

[node name="tilemap" type="Node2D" parent="." index="2"]

[node name="tile_map" type="TileMap" parent="tilemap" index="0"]

mode = 0
tile_set = ExtResource( 1 )
cell_size = Vector2( 128, 128 )
cell_quadrant_size = 16
cell_custom_transform = Transform2D( 1, 0, 0, 1, 0, 0 )
cell_half_offset = 2
cell_tile_origin = 0
cell_y_sort = false
cell_clip_uv = false
collision_use_kinematic = false
collision_friction = 1.0
collision_bounce = 0.0
collision_layer = 1
collision_mask = 1
occluder_light_mask = 1
format = 1
tile_data = PoolIntArray( 262144, 2, 0, 262145, 2, 0, 262146, 2, 0, 262147, 2, 0, 262148, 2, 0, 262149, 2, 0, 262150, 2, 0, 262151, 2, 0 )
_sections_unfolded = [ "Cell" ]

[node name="background" type="Sprite" parent="tilemap" index="1"]

position = Vector2( 0, -424 )
z_index = -3
texture = ExtResource( 2 )
centered = false
_sections_unfolded = [ "Offset", "Transform", "Z Index" ]

[node name="player_character" parent="." index="3" instance=ExtResource( 3 )]

position = Vector2( 544, 224 )


